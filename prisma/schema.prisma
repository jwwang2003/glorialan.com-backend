generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("PG_URL")
}

model Media {
  id    BigInt @id @default(autoincrement())
  uuid  String @unique
  
  // S3 information
  bucket_name   String
  object_key    String @unique
  url           String

  // Basic metadata
  original_filename   String
  size                BigInt
  width               Int
  height              Int
  duration            Int       // in ms (micro-seconds)

  created_at  DateTime
  updated_at  DateTime

  description String

  EXIF EXIF_Metadata?
}

model EXIF_Metadata { 
  id BigInt @id @default(autoincrement())
  
  media Media @relation(fields: [media_id], references: [id])
  media_id BigInt @unique
}

model User {
  id                  Int @id @unique @default(autoincrement())
  uuid                String @unique
  name                String
  username            String @unique
  password            String

  description         String
  role                Int[]
  special_privledges  String[]
}